<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemistry Structural Formula Editor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Chemistry Structural Formula Editor</h1>
            <p class="subtitle">Create, edit, and export structural formulas with ease</p>
        </header>
        
        <div class="toolbar">
            <div class="tool-section">
                <h3>Tools</h3>
                <div class="history-controls">
                    <button class="history-btn" id="undoBtn" title="Undo (Ctrl+Z)" disabled>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 7v6h6"/>
                            <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/>
                        </svg>
                    </button>
                    <button class="history-btn" id="redoBtn" title="Redo (Ctrl+Y)" disabled>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 7v6h-6"/>
                            <path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"/>
                        </svg>
                    </button>
                </div>
                <div class="mode-toggle" style="margin-bottom: 8px;">
                    <label class="toggle-label">
                        <input type="checkbox" id="snapBondsToggle" />
                        <span class="toggle-slider"></span>
                        <span class="toggle-text">Snap Bonds</span>
                    </label>
                </div>
                <button class="tool-btn active" data-tool="atom" title="Add Atom (A)">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <circle cx="10" cy="10" r="8" fill="currentColor"/>
                    </svg>
                    Atom
                </button>
                <button class="tool-btn" data-tool="bond" title="Add Bond (B)">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <line x1="2" y1="10" x2="18" y2="10" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Bond
                </button>
                <button class="tool-btn" data-tool="select" title="Select/Move (V)">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M2 2 L2 18 L8 12 L12 18 L14 17 L10 11 L18 11 Z" fill="currentColor"/>
                    </svg>
                    Select
                </button>
                <button class="tool-btn" data-tool="delete" title="Delete (D)">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M5 7 L15 7 L14 17 L6 17 Z M7 3 L13 3 L14 5 L6 5 Z" fill="currentColor"/>
                    </svg>
                    Delete
                </button>
            </div>

            <div class="tool-section">
                <h3>Atoms</h3>
                <div class="atom-buttons">
                    <button class="atom-btn active" data-atom="C">C</button>
                    <button class="atom-btn" data-atom="H">H</button>
                    <button class="atom-btn" data-atom="O">O</button>
                    <button class="atom-btn" data-atom="N">N</button>
                    <button class="atom-btn" data-atom="S">S</button>
                    <button class="atom-btn" data-atom="P">P</button>
                    <button class="atom-btn" data-atom="F">F</button>
                    <button class="atom-btn" data-atom="Cl">Cl</button>
                    <button class="atom-btn" data-atom="Br">Br</button>
                    <button class="atom-btn" data-atom="I">I</button>
                </div>
                <h3 style="margin-top: 12px;">Text</h3>
                <div class="atom-buttons">
                    <button class="atom-btn" data-atom="1">1</button>
                    <button class="atom-btn" data-atom="2">2</button>
                    <button class="atom-btn" data-atom="3">3</button>
                    <button class="atom-btn" data-atom="4">4</button>
                    <button class="atom-btn" data-atom="5">5</button>
                    <button class="atom-btn" data-atom="6">6</button>
                    <button class="atom-btn" data-atom=".">.</button>
                </div>
            </div>

            <div class="tool-section">
                <h3>Bond Types</h3>
                <div class="bond-buttons">
                    <button class="bond-type-btn active" data-bond-type="single" title="Single Bond (1)">
                        <svg width="30" height="20" viewBox="0 0 30 20">
                            <line x1="2" y1="10" x2="28" y2="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <button class="bond-type-btn" data-bond-type="double" title="Double Bond (2)">
                        <svg width="30" height="20" viewBox="0 0 30 20">
                            <line x1="2" y1="7" x2="28" y2="7" stroke="currentColor" stroke-width="2"/>
                            <line x1="2" y1="13" x2="28" y2="13" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <button class="bond-type-btn" data-bond-type="triple" title="Triple Bond (3)">
                        <svg width="30" height="20" viewBox="0 0 30 20">
                            <line x1="2" y1="5" x2="28" y2="5" stroke="currentColor" stroke-width="2"/>
                            <line x1="2" y1="10" x2="28" y2="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="2" y1="15" x2="28" y2="15" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                    <button class="bond-type-btn" data-bond-type="wedge" title="Wedge Bond (up)">
                        <svg width="30" height="20" viewBox="0 0 30 20">
                            <path d="M2 10 L28 6 L28 14 Z" fill="currentColor"/>
                        </svg>
                    </button>
                    <button class="bond-type-btn" data-bond-type="dash" title="Dash Bond (down)">
                        <svg width="30" height="20" viewBox="0 0 30 20">
                            <line x1="2" y1="10" x2="8" y2="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="10" y1="10" x2="14" y2="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="10" x2="20" y2="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="22" y1="10" x2="28" y2="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="tool-section">
                <h3>Functional Groups</h3>
                <div class="functional-group-buttons">
                    <button class="fg-btn" data-group="OH">-OH</button>
                    <button class="fg-btn" data-group="NH2">-NH2</button>
                    <button class="fg-btn" data-group="COOH">-COOH</button>
                    <button class="fg-btn" data-group="CHO">-CHO</button>
                    <button class="fg-btn" data-group="CH3">-CH3</button>
                    <button class="fg-btn" data-group="NO2">-NO2</button>
                </div>
            </div>

            <div class="tool-section">
                <h3>Templates</h3>
                <div class="functional-group-buttons">
                    <button class="template-btn" data-template="benzene" title="Benzene Ring">Benzene</button>
                    <button class="template-btn" data-template="cyclohexane" title="Cyclohexane">Cyclohex</button>
                    <button class="template-btn" data-template="cyclopentane" title="Cyclopentane">Cyclopen</button>
                </div>
            </div>

            <div class="tool-section">
                <h3>Actions</h3>
                <button class="action-btn" id="clearBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <rect x="2" y="2" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2"/>
                        <line x1="6" y1="6" x2="14" y2="14" stroke="currentColor" stroke-width="2"/>
                        <line x1="14" y1="6" x2="6" y2="14" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Clear All
                </button>
                <button class="action-btn" id="copyBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <rect x="3" y="3" width="11" height="11" fill="none" stroke="currentColor" stroke-width="2"/>
                        <rect x="6" y="6" width="11" height="11" fill="none" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Copy PNG
                </button>
                <button class="action-btn" id="copyTextBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M4 4h12v12H4z" fill="none" stroke="currentColor" stroke-width="2"/>
                        <line x1="7" y1="8" x2="13" y2="8" stroke="currentColor" stroke-width="1.5"/>
                        <line x1="7" y1="11" x2="13" y2="11" stroke="currentColor" stroke-width="1.5"/>
                        <line x1="7" y1="14" x2="10" y2="14" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    Copy Text
                </button>
                <button class="action-btn" id="downloadBtn">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M10 2 L10 12 M6 9 L10 13 L14 9 M3 15 L17 15 L17 18 L3 18 Z" fill="none" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Download PNG
                </button>
            </div>
        </div>

        <div class="canvas-container">
            <canvas id="canvas" width="1200" height="1600"></canvas>
            <div class="canvas-info">
                <div class="zoom-controls">
                    <button class="zoom-btn" id="zoomOutBtn" title="Zoom Out (-)">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            <line x1="8" y1="11" x2="14" y2="11"/>
                        </svg>
                    </button>
                    <span class="zoom-level" id="zoomLevel">100%</span>
                    <button class="zoom-btn" id="zoomInBtn" title="Zoom In (+)">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
                            <line x1="11" y1="8" x2="11" y2="14"/>
                            <line x1="8" y1="11" x2="14" y2="11"/>
                        </svg>
                    </button>
                    <button class="zoom-btn" id="zoomResetBtn" title="Reset Zoom">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                            <path d="M3 3v5h5"/>
                        </svg>
                    </button>
                </div>
                <span id="coordsDisplay">X: 0, Y: 0</span>
                <span id="statusDisplay">Ready</span>
            </div>
        </div>

        <div class="keyboard-shortcuts">
            <div class="shortcut-item"><span class="shortcut-key">A</span> Atom Tool</div>
            <div class="shortcut-item"><span class="shortcut-key">B</span> Bond Tool</div>
            <div class="shortcut-item"><span class="shortcut-key">V</span> Select Tool</div>
            <div class="shortcut-item"><span class="shortcut-key">D</span> Delete Tool</div>
            <div class="shortcut-item"><span class="shortcut-key">1-3</span> Bond Type</div>
            <div class="shortcut-item"><span class="shortcut-key">Ctrl+Z</span> Undo</div>
            <div class="shortcut-item"><span class="shortcut-key">Ctrl+Y</span> Redo</div>
            <div class="shortcut-item"><span class="shortcut-key">Ctrl+C</span> Copy</div>
            <div class="shortcut-item"><span class="shortcut-key">Del</span> Delete Selected</div>
        </div>

        <div class="instructions">
            <h3>Quick Start Guide</h3>
            <ul>
                <li><strong>Add Atoms:</strong> Select "Atom" tool, choose an element, and click on the canvas</li>
                <li><strong>Add Bonds:</strong> Select "Bond" tool, choose bond type, click on first atom, then click on second atom</li>
                <li><strong>Add Functional Groups:</strong> Click a functional group button, then click on an atom to attach it</li>
                <li><strong>Use Templates:</strong> Click Benzene, Cyclohexane, or Cyclopentane to add common ring structures</li>
                <li><strong>Move:</strong> Select "Select" tool, then drag atoms to reposition them (bonds follow automatically)</li>
                <li><strong>Delete:</strong> Select "Delete" tool, then click on atoms or bonds to remove them</li>
                <li><strong>Copy PNG:</strong> Copy as transparent PNG image for Word, PowerPoint, etc.</li>
                <li><strong>Copy Text:</strong> Copy the molecular formula as plain text</li>
            </ul>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
